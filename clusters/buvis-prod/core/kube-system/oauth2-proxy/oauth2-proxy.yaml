apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
    name: oauth2-proxy
    namespace: kube-system
spec:
    chart:
        spec:
            chart: oauth2-proxy
            sourceRef:
                kind: HelmRepository
                name: k8s-at-home
    install: {}
    interval: 10m
    values:
        config:
            clientID: ENC[AES256_GCM,data:uYFM26z953CJ8hkAUV5nvKaGgLw=,iv:AUBSYewKuqgO5PXGFHwmcIGa+LAKxmqVBn0qKyhaEds=,tag:oi1mcG3T1pamMqVcN619iQ==,type:str]
            clientSecret: ENC[AES256_GCM,data:/6WtwdrEHBr8NKBmVksfuGexBMTD7XFNDTQX/fQzQHi9OVADo32373Q=,iv:f1oV9WCHwn+fODIvu2nacn+kSn3qtLvH4pyNX29rrk0=,tag:TySNRTqmW+srHQBmaW23SQ==,type:str]
            cookieSecret: ENC[AES256_GCM,data:6whoTiK2NVcJQnw1zqAsC4NlLOXLpeMX,iv:n/V+/t9yHc7zhliH7HgrvT0tYfou0+wrxplDEfEVaVg=,tag:uiw6HWRYUVm9apiZBI7h/A==,type:str]
        extraArgs:
            whitelist-domain: .int.buvis.net
            cookie-domain: .int.buvis.net
            provider: github
        authenticatedEmailsFile:
            enabled: true
            restricted_access: tomas@buvis.net
        ingress:
            enabled: true
            path: /
            hosts:
                - auth.int.buvis.net
            annotations:
                kubernetes.io/ingress.class: nginx
                cert-manager.io/cluster-issuer: letsencrypt-prod
            tls:
                - secretName: oauth2-proxy-https-cert
                  hosts:
                    - auth.int.buvis.net
        image:
            tag: latest-arm64
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age: []
    lastmodified: "2021-07-29T19:39:35Z"
    mac: ENC[AES256_GCM,data:+7DDwBt35xL4qOwtqvXlhyPgOSpHfK8Of+WW3uNEnGVOIiGHV8uU4rxysC6NpsNhikiIIdJZdHWkmh693Kv+lZtB5CA9M7NZVizVTnS5h/4WO1p47vIwAYTZ0GcHM5OwofJtHmBce7vwToTFRdTdTwYy+09FdfbiPA0UxYGuOl8=,iv:V8wZ8c3+mH27Tgk0HXVzM5taPJfOHVsoweK8KaKB6lI=,tag:X03rW5yBLbLaL+NpqixZRw==,type:str]
    pgp:
        - created_at: "2021-07-29T19:39:35Z"
          enc: |
            -----BEGIN PGP MESSAGE-----

            hQEMAwo8/97jcEfJAQf9HgkFcn18lakFqNVHDBinaH+Lgmk4reG1wwPP+v1pmn6F
            77HJ0WAT7Ut2qroqSJcFiXx6j4sDHpA8jE0bZtZew4tHukfC9nGk6P3ZyfM7qQF2
            srnk7UUgzNvnxN7fFPjHntVDUjYQIHat6GSgt2wYU3X1wB8ux++8S7ZdSs6xQsCN
            SNXp4mjXcKjQxFS/nRJAc/opOzQfU8uXmh3YR5lUJTM3cat9l9cV7GXG1yZ5KYJp
            Atlix2q7xGrhV5jAn8UHGJm9UNw5yg5cTElM++SmCH1+Rag5uNSfX9iI6rcnbV2W
            1VLm+jySCgGyeIWDCR4eP84eIBTI1gownkWaiLLoaNJeAThmCdGbLKTWfTnGg1Tp
            d03Jc1Ku5DnfEKc4KXyT1VlTx/io34BUP4IpZJz5ANR7CbsG+eA6VBzj4ED7oV5z
            8is5xBjD/RRR9qXWOfCvAbR3G9znD2ZbK6XiEwCHmw==
            =UwUR
            -----END PGP MESSAGE-----
          fp: D2692898F83D5282BCB37D915C2069935D86C4E1
    encrypted_regex: ^(clientID|clientSecret|cookieSecret)$
    version: 3.7.1
